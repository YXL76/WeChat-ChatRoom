<!-- pages/chat/chat.wxml -->
<view class="container {{ theme }} flex flex-column align-center">
    <block wx:for="{{ messageList }}" wx:key="unique">
        <block wx:if="{{ item.type === 'text' }}">
            <view class="message flex {{ item.avatarUrl === userInfo.avatarUrl ? 'flex-row-reverse' : 'flex-row' }}">
                <image class="avatar" src="{{ item.avatarUrl }}" />
                <view class="flex flex-column {{ item.avatarUrl === userInfo.avatarUrl ? 'align-end' : 'align-start' }}">
                    <view>
                        <text class="nickname {{ theme }}">{{ item.nickName }}</text>
                    </view>
                    <view class="content {{ theme }} {{ item.avatarUrl === userInfo.avatarUrl ? 'user' : 'other' }}">
                        {{ item.content }}
                    </view>
                </view>
            </view>
        </block>
        <block wx:elif="{{ item.type === 'system' && systemNum }}">
            <view class="system">{{ item.content }}</view>
        </block>
        <block wx:elif="{{ item.type === 'systemIn' && systemIn }}">
            <view class="system">{{ item.content }}</view>
        </block>
        <block wx:elif="{{ item.type === 'systemOut' && systemOut }}">
            <view class="system">{{ item.content }}</view>
        </block>
    </block>
    <view style="height: 108rpx"></view>
</view>
<view class="input-panel {{ theme }} flex flex-row align-center space-around">
    <view class="iconfont iconshezhi icon {{ theme }}" bindtap="toSetting" />
    <view class="iconfont iconshijian icon {{ theme }}" bindtap="toHistory" />
    <view class="input-container">
        <input class="input {{ theme }}" value="{{ message }}" confirm-type="send" bindinput="inputMessage" bindconfirm="sendMessage" />
    </view>
    <view class="send {{ theme }}" bindtap="sendMessage">发送</view>
</view>